<div class="row" *ngIf="post">
  <div class="col-md-6">
    <mat-card class="example-card">
      <mat-card-title>{{ post.title }}</mat-card-title>
      <mat-card-subtitle
        >Post nÂ°{{ post.id }} by {{ post.userId }}</mat-card-subtitle
      >
      <mat-card-content>
        <p>{{ post.body }}</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="primary" (click)="goBack()">Go Back</button>
      </mat-card-actions>
    </mat-card>
  </div>
  <div class="row">
    <div class="col-md-4">
      <mat-accordion>
        <mat-expansion-panel *ngFor="let comment of comments">
          <mat-expansion-panel-header>
            <mat-panel-title> {{ comment.name }} </mat-panel-title>
            <mat-panel-description>
              Comment by {{ comment.email }}
            </mat-panel-description>
          </mat-expansion-panel-header>
          <p>{{ comment.body }}</p>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </div>

  <div *ngIf="submitted">

    <button type="button" class="btn btn-primary" (click)="resetCommentForm()">New comment</button>
  </div>

  <div *ngIf="!submitted">
    <form (ngSubmit)="onSubmit()" #commentForm="ngForm">
      <mat-form-field appearance="fill">
        <mat-label>Title</mat-label>
        <input matInput [(ngModel)]="comment.name" id="name" name="name">
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Select user email</mat-label>
        <input [(ngModel)]="comment.email" type="text" matInput [formControl]="emailControl" [matAutocomplete]="auto">
        <mat-autocomplete #auto="matAutocomplete">
          <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
            {{option}}
          </mat-option>
        </mat-autocomplete>
        <!-- <mat-select [(ngModel)]="comment.email" id="email" name="email">
          <mat-option *ngFor="let email of emails" value="{{email}}">{{email}}</mat-option>
        </mat-select> -->
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Body</mat-label>
        <textarea matInput [(ngModel)]="comment.body" id="body" name="body"></textarea>
      </mat-form-field>

      <button type="submit" class="btn btn-success" [disabled]="!commentForm.form.valid">Comment</button>
      <button type="button" class="btn btn-default" (click)="commentForm.reset()">Reset</button>
    </form>
  </div>
</div>
